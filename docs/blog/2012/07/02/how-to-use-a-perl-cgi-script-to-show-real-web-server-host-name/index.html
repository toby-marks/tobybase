<!DOCTYPE html>
<html class="no-js" lang="en-US" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="description" content="How To Use a Perl CGI Script to Show Real Web Server Host Name">
    <meta name="author" content="Toby Marks">

    <meta name="keyword" content="">
    <link rel="shortcut icon" href="/favicon.ico">

    <title>How To Use a Perl CGI Script to Show Real Web Server Host Name &middot; tobybase</title>

   	
    
        <link rel="preload" href="http://tobybase.com/css/theme/cosmo.css" as="style" onload="this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="http://tobybase.com/css/theme/cosmo.css"></noscript>
    

    <link rel="preload" href="http://tobybase.com/css/font-awesome.min.css" as="stylesheet" onload="this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="http://tobybase.com/css/font-awesome.min.css"></noscript>

   	
   	<link rel="preload" href="http://tobybase.com/css/style.css" as="stylesheet" onload="this.rel='stylesheet'">
   	<noscript><link rel="stylesheet" href="http://tobybase.com/css/style.css"></noscript>

    <script>
 
(function(w){
	"use strict";
	 
	var loadCSS = function( href, before, media ){
		
		
		
			
		
		var doc = w.document;
		var ss = doc.createElement( "link" );
		var ref;
		if( before ){
			ref = before;
		}
		else {
			var refs = ( doc.body || doc.getElementsByTagName( "head" )[ 0 ] ).childNodes;
			ref = refs[ refs.length - 1];
		}

		var sheets = doc.styleSheets;
		ss.rel = "stylesheet";
		ss.href = href;
		
		ss.media = "only x";

		
		function ready( cb ){
			if( doc.body ){
				return cb();
			}
			setTimeout(function(){
				ready( cb );
			});
		}
		
			
			
		ready( function(){
			ref.parentNode.insertBefore( ss, ( before ? ref : ref.nextSibling ) );
		});
		
		var onloadcssdefined = function( cb ){
			var resolvedHref = ss.href;
			var i = sheets.length;
			while( i-- ){
				if( sheets[ i ].href === resolvedHref ){
					return cb();
				}
			}
			setTimeout(function() {
				onloadcssdefined( cb );
			});
		};

		function loadCB(){
			if( ss.addEventListener ){
				ss.removeEventListener( "load", loadCB );
			}
			ss.media = media || "all";
		}

		
		if( ss.addEventListener ){
			ss.addEventListener( "load", loadCB);
		}
		ss.onloadcssdefined = onloadcssdefined;
		onloadcssdefined( loadCB );
		return ss;
	};
	
	if( typeof exports !== "undefined" ){
		exports.loadCSS = loadCSS;
	}
	else {
		w.loadCSS = loadCSS;
	}
}( typeof global !== "undefined" ? global : this ));
 
(function( w ){
  
  if( !w.loadCSS ){
    return;
  }
  var rp = loadCSS.relpreload = {};
  rp.support = function(){
    try {
      return w.document.createElement( "link" ).relList.supports( "preload" );
    } catch (e) {
      return false;
    }
  };

  
  rp.poly = function(){
    var links = w.document.getElementsByTagName( "link" );
    for( var i = 0; i < links.length; i++ ){
      var link = links[ i ];
      if( link.rel === "preload" && link.getAttribute( "as" ) === "style" ){
        w.loadCSS( link.href, link, link.getAttribute( "media" ) );
        link.rel = null;
      }
    }
  };

  
  if( !rp.support() ){
    rp.poly();
    var run = w.setInterval( rp.poly, 300 );
    if( w.addEventListener ){
      w.addEventListener( "load", function(){
        rp.poly();
        w.clearInterval( run );
      } );
    }
    if( w.attachEvent ){
      w.attachEvent( "onload", function(){
        w.clearInterval( run );
      } )
    }
  }
}( this ));
    </script>
    
    
    <link href="" rel="alternate" type="application/rss+xml" title="tobybase" />
</head>
<body lang="en-US">
    
    <div class="container">
    <div class="row">
        <div class="navbar navbar-default " role="navigation">
            <div class="navbar-header">
                <a class="navbar-brand" href="http://tobybase.com"><img src="http://tobybase.com/img/logo.png" height="100%"></a>
            </div>
            <div class="navbar-collapse collapse navbar-responsive-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="http://tobybase.com">Home</a></li>
                    <li><a href="http://tobybase.com/post/">Blog</a></li>
                    
                </ul>
            </div>
        </div>
    </div>
</div>



<div class="container">
	<div class="row">
		<div class="col-md-offset-1 col-md-10">
			<h3>How To Use a Perl CGI Script to Show Real Web Server Host Name</h3>
				<span class="label label-primary">07/02/2012</span> in 
				
					
					<a href="/categories/howtos">HowTos</a>
				 using tags
				
					
					<a href="/tags/perl">perl</a>
				
					 , 
					<a href="/tags/cgi">cgi</a>
				
					 , 
					<a href="/tags/scripting">scripting</a>
				
			</small>
		</div>
	</div>
	<div class="row">
		<div class="col-md-offset-1 col-md-10">
			<br>
			<p>Here is a short and simple Perl CGI script that you can use to expose the hostname of your web server, as opposed to just the server/domain portion of the URL string:</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%"><span></span>    <span style="color: #aaaaaa; font-style: italic">#!/usr/bin/perl</span>
    
    <span style="color: #0000aa">print</span> <span style="color: #aa5500">&quot;Content-type: text/html\n\n&quot;</span>;
    <span style="color: #0000aa">print</span> <span style="color: #aa5500">`hostname`</span>;
    
    <span style="color: #009999">1</span>;
</pre></div>

<p>Name the file something like <code>hostname.cgi</code> and place it in your web server&rsquo;s <code>/cgi-bin/</code> directory, or if your web server is configured appropriately, just name it <code>hostname.pl</code> and drop it wherever you like.</p>

<p>The following script can be used to dump all the CGI environment variables.</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%"><span></span>    <span style="color: #aaaaaa; font-style: italic">#!/usr/bin/perl</span>
    
    <span style="color: #0000aa">print</span> <span style="color: #aa5500">&quot;Content-type: text/html\n\n&quot;</span>;
    <span style="color: #0000aa">print</span> <span style="color: #aa5500">&quot;&lt;font size=+1&gt;Environment&lt;/font&gt;\n&quot;</span>;
    <span style="color: #0000aa">foreach</span> (<span style="color: #00aaaa">sort</span> <span style="color: #00aaaa">keys</span> <span style="color: #aa0000">%ENV</span>)
    {
      <span style="color: #0000aa">print</span> <span style="color: #aa5500">&quot;&lt;b&gt;$_&lt;/b&gt;: $ENV{$_}&lt;br&gt;\n&quot;</span>;
    }
    
    <span style="color: #009999">1</span>;
</pre></div>

<p>Note that this includes <code>SERVER_NAME</code>, but what that really gives you is the &ldquo;server&rdquo; portion of the URL string. In other words, if your URL is http:&#47;&#47;www.google.com&#47;, then the <code>SERVER_NAME</code> CGI environment variable would be &ldquo;www.google.com&rdquo;. Fine, but the first script can be used to identify the actual server being called, for example, when your page is hosted on multiple servers load-balanced under a virtual domain name.</p>

<p>Of course, you could combine the two scripts to give you everything:</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%"><span></span>    <span style="color: #aaaaaa; font-style: italic">#!/usr/bin/perl</span>
    
    <span style="color: #0000aa">print</span> <span style="color: #aa5500">&quot;Content-type: text/html\n\n&quot;</span>;
    <span style="color: #0000aa">print</span> <span style="color: #aa5500">&quot;&lt;font size=+1&gt;Environment&lt;/font&gt;\n&quot;</span>;
    <span style="color: #0000aa">foreach</span> (<span style="color: #00aaaa">sort</span> <span style="color: #00aaaa">keys</span> <span style="color: #aa0000">%ENV</span>)
    {
      <span style="color: #0000aa">print</span> <span style="color: #aa5500">&quot;&lt;b&gt;$_&lt;/b&gt;: $ENV{$_}&lt;br&gt;\n&quot;</span>;
    }
    
    <span style="color: #0000aa">print</span> <span style="color: #aa5500">&quot;&lt;b&gt;REAL SERVER HOSTNAME:&lt;/b&gt; &quot;</span>,<span style="color: #aa5500">`hostname`</span>;
    
    <span style="color: #009999">1</span>;
</pre></div>

		</div>
	</div>

	<div class="row">
		<div class="col-md-12">
			<hr>
		</div>
	</div>

<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'tobybase-com';
    var disqus_identifier = 'http:\/\/tobybase.com\/blog\/2012\/07\/02\/how-to-use-a-perl-cgi-script-to-show-real-web-server-host-name\/';
    var disqus_title = 'How To Use a Perl CGI Script to Show Real Web Server Host Name';
    var disqus_url = 'http:\/\/tobybase.com\/blog\/2012\/07\/02\/how-to-use-a-perl-cgi-script-to-show-real-web-server-host-name\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

	<div class="row">
		<div class="col-md-12">
			<hr>
		</div>
	</div>
</div>

    <div class="container">
        <div class="row col-md-12">
            <footer>
                <div class="pull-left">
                    <p>
                        &copy; 2015 ~ Toby Marks ~ Powered By <a href="http://hugo.spf13.com">Hugo</a> ~ <a href="http://tobybase.com/license/">License</a>
                    </p>
                </div>

                
                <div class="pull-right">
                    
                        <a href="https://www.linkedin.com/in/tobymarks" target="_blank">
                        <i class="fa fa-linkedin fa-2x"></i></a>
                    
                    
                    
                        <a href="https://twitter.com/toby_marks" target="_blank">
                        <i class="fa fa-twitter-square fa-2x"></i></a>
                    
                    
                        <a href="https://github.com/toby-marks" target="_blank">
                        <i class="fa fa-github-square fa-2x"></i></a>
                    
                    
                    
                    
                </div>
            </footer>
        </div>
    </div>

    
    <script src="http://tobybase.com/js/jquery.min-2.1.4.js"></script>
    <script src="http://tobybase.com/js/bootstrap.min-3.3.5.js"></script>

    
    </body>
</html>

